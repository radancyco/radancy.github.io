<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Performance: Chrome Downloads 2 Images When Crossorigin Attribute (Anonymous) Present - TMP Worldwide Development Blog</title>
</head>

<body>

    <a href="/"><img class="logo" src="/assets/img/hdr-logo-wide.png" alt="TMP Worldwide, LLC"></a>

    <h1>Performance: Chrome Downloads 2 Images When Crossorigin (Anonymous) Present</h1>

    <p>Posted on <time datetime="2016-09-26 19:30">Monday, September 26, 2016 19:30:00 PM</time> <abbr title="Eastern Standard Time">EST</abbr> by <a href="https://github.com/michaelspellacy">Michael "Spell" Spellacy</a></p>

    <p>
        <b>Browser:</b> Chrome (Mac)<br/>
        <b>Version:</b> 53.0.2785.116 (64-bit)
    </p>

    <video crossorigin="anonymous" preload="none" poster="https://tbcdn.talentbrew.com/company/3401/v1_0/media/case-study-microsoft.jpg">

        <source src="https://tbcdn.talentbrew.com/company/3401/v1_0/media/case-study-microsoft.mp4" type="video/mp4">
        <track label="English" kind="subtitles" srclang="en" src="https://tbcdn.talentbrew.com/company/3401/v1_0/media/case-study-microsoft.en.vtt">

    </video>

    <p>There appears to be a bug within iOS WebKit (and Blink) rendering engines. Under certain conditions, YouTube videos embedded within iframes cannot be viewed when a user clicks on the video. <em>Eep!</em></p>

    <p>In TMP's particular instance, the conditions had to be just right. A "perfect storm" of issues, if you will. :)</p>

    <h2>The Bug</h2>

    <p>Applying the <code>:active</code> pseudo-class to a universal selector (*) and including a property of <code>-webkit-tap-highlight-color</code> seems to be the culprit.</p> 

<code><pre>

*:active {
-webkit-tap-highlight-color: tomato;
}

</pre></code>

    <p>Now, here is the strange part. The bug is only triggered when the above CSS block is present <strong>and</strong> there is an <code>input</code> element present on the page with a type attribute value of "search". I know, crazy, right?</p>

<code><pre>

&lt;input type="search" placeholder="Search"/&gt;

</pre></code>

    <p>Another oddity here is that when you apply focus to the search input, type something in, and then attempt to play video, it will then work.</p>

    <h2>The Solution</h2>

    <p>Either renaming the input type to "text" or removing <code>-webkit-tap-highlight-color</code> (likely preferred solution) should alleviate the issue.</p>

    <p><a href="ios-tappy-bug-fix.html">Here is the page without the webkit-tap-highlight-color property.</a></p>

    <hr/>

    <br/>

    <img src="https://www.gravatar.com/avatar/89e429d4a3effa9601cd19a851c0003e?s=200" alt="Michael Spellacy" style="width: 100px; height: 100px; border-radius: 50%;">

    <p>I am Michael "Spell" Spellacy, Director of User Interface Design and Development at <a href="http://www.tmp.com/">TMP Worldwide</a>. If you have any questions, feel free to contact me on <a href="https://github.com/michaelspellacy">Github</a> or follow me on <a href="https://twitter.com/spellacy">Twitter</a>.</p>

    <script src="/js/ga.js"></script>

</body>
</html>
